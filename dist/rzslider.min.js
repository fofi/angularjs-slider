/*! angularjs-slider - v1.1.0 - (c) Rafal Zajac <rzajac@gmail.com>, Valentin Hervieu <valentin@hervieu.me>, Jussi Saarivirta <jusasi@gmail.com>, Angelin Sirbu <angelin.sirbu@gmail.com>, https://github.com/rzajac/angularjs-slider.git - 2017-05-09 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof module&&module.exports?module.exports=b(require("angular")):b(a.angular)}(this,function(a){"use strict";var b=a.module("rzModule",[]).value("throttle",function(a,b,c){var d,e,f,g=Date.now||function(){return(new Date).getTime()},h=null,i=0;c=c||{};var j=function(){i=c.leading===!1?0:g(),h=null,f=a.apply(d,e),d=e=null};return function(){var k=g();i||c.leading!==!1||(i=k);var l=b-(k-i);return d=this,e=arguments,0>=l?(clearTimeout(h),h=null,i=k,f=a.apply(d,e),d=e=null):h||c.trailing===!1||(h=setTimeout(j,l)),f}}).value("getClosestValue",function(a,b){for(var c=-1,d=a.length;d-c>1;){var e=Math.round((c+d)/2);a[e]<=b?c=e:d=e}return b-a[c]>a[d]-b?a[d]:a[c]}).factory("RzSlider",["$timeout","$document","$window","throttle","getClosestValue",function(b,c,d,e,f){var g=function(a,b,c){if(this.scope=a,this.attributes=c,this.sliderElem=b,this.range=void 0!==c.rzSliderHigh&&void 0!==c.rzSliderModel,this.multipleRange=void 0!==c.rzSliderMiddle&&void 0!==c.rzSliderHigh&&void 0!==c.rzSliderModel,this.dragRange=this.range&&"true"===c.rzSliderDraggableRange,"true"===c.rzSliderDraggableRange&&this.multipleRange)throw new Error("Not implemented");this.dragging={active:!1,value:0,difference:0,offset:0,lowDist:0,highDist:0},this.handleHalfWidth=0,this.alwaysShowBar=!!c.rzSliderAlwaysShowBar,this.maxLeft=0,this.precision=0,this.step=0,this.stepArray=[],this.tracking="",this.middleTrackingIndex=0,this.minValue=0,this.maxValue=0,this.hideLimitLabels=!!c.rzSliderHideLimitLabels,this.hidePointerLabels=!!c.rzSliderHidePointerLabels,this.presentOnly="true"===c.rzSliderPresentOnly,this.showTicks=c.rzSliderShowTicks||c.rzSliderShowTicksValue,this.showTicksValue=c.rzSliderShowTicksValue,this.rzSliderLegend=c.rzSliderLegend,this.disabled=this.scope.rzSliderDisabled,this.interval=null!==this.scope.rzSliderInterval?this.scope.rzSliderInterval:350,this.activeLabel="true"===this.scope.rzSliderActiveLabel,this.valueRange=0,this.initHasRun=!1,this.customTrFn=this.scope.rzSliderTranslate()||function(a){return String(a)},this.deRegFuncs=[],this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.legend=null,this.middleH=null,this.middleBar=null,this.init()};return g.prototype={init:function(){var c,f,g,h,i=a.bind(this,this.calcViewDimensions),j=this;this.scope.rzSliderStepArray&&(this.stepArray=this.scope.rzSliderStepArray,this.scope.rzSliderFloor=this.stepArray[0],this.scope.rzSliderCeil=this.stepArray[this.stepArray.length-1]),this.initElemHandles(),this.addAccessibility(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.precision=void 0===this.scope.rzSliderPrecision?0:+this.scope.rzSliderPrecision,this.step=void 0===this.scope.rzSliderStep?1:+this.scope.rzSliderStep,b(function(){j.updateCeilLab(),j.updateFloorLab(),j.initHandles(),j.bindEvents()}),h=this.scope.$on("reCalcViewDimensions",i),this.deRegFuncs.push(h),a.element(d).on("resize",i),this.initHasRun=!0,c=e(function(){j.setMinAndMax(),j.updateLowHandle(j.valueToOffset(j.scope.rzSliderModel)),j.updateSelectionBar(),j.updateTicksScale(),j.updateLegend(),j.range&&j.updateCmbLabel(),j.multipleRange&&j.updateMiddleSelectionBars()},j.interval),g=e(function(){j.setMinAndMax(),j.updateMiddleHandles(j.valuesToOffset(j.scope.rzSliderMiddle)),j.updateSelectionBar(),j.updateTicksScale(),j.updateLegend(),j.updateCmbLabel(),j.updateMiddleSelectionBars()},j.interval),f=e(function(){j.setMinAndMax(),j.updateHighHandle(j.valueToOffset(j.scope.rzSliderHigh)),j.updateSelectionBar(),j.updateTicksScale(),j.updateLegend(),j.updateCmbLabel(),j.multipleRange&&j.updateMiddleSelectionBars()},j.interval),this.scope.$on("rzSliderForceRender",function(){j.resetLabelsValue(),c(),j.range&&f(),j.multipleRange&&g(),j.resetSlider()}),h=this.scope.$watch("rzSliderModel",function(a,b){a!==b&&c()}),this.deRegFuncs.push(h),h=this.scope.$watch("rzSliderMiddle",function(a,b){_.isEqual(a,b)||g()},!0),this.deRegFuncs.push(h),h=this.scope.$watch("rzSliderHigh",function(a,b){a!==b&&f()}),this.deRegFuncs.push(h),this.scope.$watch("rzSliderFloor",function(a,b){a!==b&&j.resetSlider()}),this.deRegFuncs.push(h),h=this.scope.$watch("rzSliderCeil",function(a,b){a!==b&&j.resetSlider()}),this.deRegFuncs.push(h),h=this.scope.$watch("rzSliderShowTicks",function(a,b){a!==b&&j.resetSlider()}),this.deRegFuncs.push(h),h=this.scope.$watch("rzSliderShowTicksValue",function(a,b){a!==b&&j.resetSlider()}),this.deRegFuncs.push(h),h=this.scope.$watch("rzSliderDisabled",function(a,b){a!==b&&(j.resetSlider(),j.disabled?j.unbindEvents():j.bindEvents())}),this.deRegFuncs.push(h),this.scope.$on("$destroy",function(){j.unbindEvents(),a.element(d).off("resize",i),j.deRegFuncs.map(function(a){a()})})},resetSlider:function(){this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.setDisabledState(),this.calcViewDimensions()},setDisabledState:function(){this.disabled=this.scope.rzSliderDisabled,this.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToOffset(this.scope.rzSliderModel)),this.range&&this.updateHighHandle(this.valueToOffset(this.scope.rzSliderHigh)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.multipleRange&&this.updateMiddleHandles(this.valuesToOffset(this.scope.rzSliderMiddle)),this.updateTicksScale(),this.multipleRange&&this.updateMiddleSelectionBars(),this.updateLegend()},translateFn:function(a,b,c){c=void 0===c?!0:c;var d=(c?this.customTrFn(a):a).toString(),e=!1;(void 0===b.rzsv||b.rzsv.length!==d.length||b.rzsv.length>0&&0===b.rzsw)&&(e=!0,b.rzsv=d),b.text(d),e&&this.getWidth(b)},setMinAndMax:function(){this.scope.rzSliderFloor?this.minValue=+this.scope.rzSliderFloor:this.minValue=this.scope.rzSliderFloor=0,this.scope.rzSliderCeil?this.maxValue=+this.scope.rzSliderCeil:this.maxValue=this.scope.rzSliderCeil=this.range?this.scope.rzSliderHigh:this.scope.rzSliderModel,this.scope.rzSliderStep&&(this.step=+this.scope.rzSliderStep),this.valueRange=this.maxValue-this.minValue},initElemHandles:function(){a.forEach(this.sliderElem.children(),function(b,c){var d=a.element(b);switch(c){case 0:this.fullBar=d;break;case 1:this.selBar=d;break;case 2:this.minH=d;break;case 3:this.middleH=d;break;case 4:this.maxH=d;break;case 5:this.flrLab=d;break;case 6:this.ceilLab=d;break;case 7:this.minLab=d;break;case 8:this.maxLab=d;break;case 9:this.cmbLab=d;break;case 10:this.ticks=d;break;case 11:this.legend=d;break;case 12:this.middleBar=d;break;case 13:this.activeLab=d}},this),this.middleHs=[],this.middleBars=[],this.selBar.rzsl=0,this.minH.rzsl=0,this.maxH.rzsl=0,this.flrLab.rzsl=0,this.ceilLab.rzsl=0,this.minLab.rzsl=0,this.maxLab.rzsl=0,this.cmbLab.rzsl=0,this.middleH.rzsl=[],this.activeLab.rzsl=0,this.hideLimitLabels&&(this.flrLab.rzAlwaysHide=!0,this.ceilLab.rzAlwaysHide=!0,this.hideEl(this.flrLab),this.hideEl(this.ceilLab)),this.hidePointerLabels&&(this.minLab.rzAlwaysHide=!0,this.maxLab.rzAlwaysHide=!0,this.cmbLab.rzAlwaysHide=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.hideEl(this.cmbLab)),this.range===!1&&(this.cmbLab.remove(),this.maxLab.remove(),this.maxH.rzAlwaysHide=!0,this.maxH[0].style.zIndex="-1000",this.hideEl(this.maxH)),this.range&&this.multipleRange&&this.selBar.remove(),this.range===!1&&this.alwaysShowBar===!1&&(this.maxH.remove(),this.selBar.remove()),this.multipleRange||(this.middleH.remove(),this.middleBar.remove()),this.activeLabel||this.activeLab.remove(),this.dragRange&&(this.selBar.css("cursor","move"),this.selBar.addClass("rz-draggable"))},addAccessibility:function(){this.sliderElem.attr("role","slider")},calcViewDimensions:function(){var a=this.getWidth(this.minH);this.handleHalfWidth=a/2,this.barWidth=this.getWidth(this.fullBar),this.maxLeft=this.barWidth-a,this.getWidth(this.sliderElem),this.sliderElem.rzsl=this.sliderElem[0].getBoundingClientRect().left,this.initHasRun&&(this.updateFloorLab(),this.updateCeilLab(),this.initHandles())},updateTicksScale:function(){if(this.showTicks&&this.step){var a=this.step;parseInt(this.showTicks)==this.showTicks&&(a=this.showTicks);for(var b="",c=Math.round((this.maxValue-this.minValue)/a)+1,d=0;c>d;d++){var e=this.roundStep(this.minValue+d*a),f=this.isTickSelected(e)?"selected":"";b+='<li class="tick '+f+'">',this.showTicksValue&&(b+='<span class="tick-value">'+this.getDisplayValue(e)+"</span>"),b+="</li>"}this.ticks.html(b)}},isTickSelected:function(a){this.valueToOffset(a);return!this.range&&this.alwaysShowBar&&a<=this.scope.rzSliderModel?!0:this.range&&a>=this.scope.rzSliderModel&&a<=this.scope.rzSliderHigh?!0:!1},updateLegend:function(){this.rzSliderLegend&&this.legend.text(this.rzSliderLegend)},updateCeilLab:function(){this.translateFn(this.scope.rzSliderCeil,this.ceilLab),this.setLeft(this.ceilLab,this.barWidth-this.ceilLab.rzsw),this.getWidth(this.ceilLab)},updateFloorLab:function(){this.translateFn(this.scope.rzSliderFloor,this.flrLab),this.getWidth(this.flrLab)},callOnStart:function(){if(this.scope.rzSliderOnStart){var a=this;b(function(){a.scope.rzSliderOnStart()})}},callOnChange:function(){if(this.scope.rzSliderOnChange){var a=this;b(function(){a.scope.rzSliderOnChange()})}},callOnEnd:function(){if(this.scope.rzSliderOnEnd){var a=this;b(function(){a.scope.rzSliderOnEnd()})}},updateHandles:function(a,b,c){return"rzSliderModel"===a?(this.updateLowHandle(b),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel(),void(this.multipleRange&&this.updateMiddleSelectionBars())):"rzSliderHigh"===a?(this.updateHighHandle(b),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel(),void(this.multipleRange&&this.updateMiddleSelectionBars())):"rzSliderMiddle"===a?(this.updateTicksScale(),this.updateCmbLabel(),void this.updateMiddleSelectionBars()):(this.updateLowHandle(b),this.updateHighHandle(b),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.multipleRange&&this.updateMiddleSelectionBars(),void this.updateLegend())},updateLowHandle:function(a){this.setLeft(this.minH,a),this.translateFn(this.scope.rzSliderModel,this.minLab),this.setLeft(this.minLab,a-this.minLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil()},updateMiddleHandles:function(b){for(var c=this.middleHs,d=0;d<b.length;d++){var e=c[d],f=!!e;e=f?e:a.element('<span class="rz-pointer rz-middle-'+d+'" index="'+d+'"></span>'),this.setLeft(e,b[d]),f||(this.middleH.append(e),e.on("mousedown",a.bind(this,this.onStart,e,"rzSliderMiddle")),e.on("touchstart",a.bind(this,this.onStart,e,"rzSliderMiddle"))),e.index=d,this.middleHs[d]=e}for(var d=b.length;d<this.middleHs.length;d++)this.middleHs[d].off(),this.middleHs[d].remove();b.length<this.middleHs.length&&(this.middleHs=this.middleHs.slice(0,b.length))},updateHighHandle:function(a){this.setLeft(this.maxH,a),this.translateFn(this.scope.rzSliderHigh,this.maxLab),this.setLeft(this.maxLab,a-this.maxLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil()},shFloorCeil:function(){var a=!1,b=!1;this.minLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+5?(a=!0,this.hideEl(this.flrLab)):(a=!1,this.showEl(this.flrLab)),this.minLab.rzsl+this.minLab.rzsw>=this.ceilLab.rzsl-this.handleHalfWidth-10?(b=!0,this.hideEl(this.ceilLab)):(b=!1,this.showEl(this.ceilLab)),this.range&&(this.maxLab.rzsl+this.maxLab.rzsw>=this.ceilLab.rzsl-10?this.hideEl(this.ceilLab):b||this.showEl(this.ceilLab),this.maxLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+this.handleHalfWidth?this.hideEl(this.flrLab):a||this.showEl(this.flrLab))},updateSelectionBar:function(){this.setWidth(this.selBar,Math.abs(this.maxH.rzsl-this.minH.rzsl)+this.handleHalfWidth),this.setLeft(this.selBar,this.range?this.minH.rzsl+this.handleHalfWidth:0)},updateMiddleSelectionBars:function(){function b(a){switch(a){case-1:return c.minH.rzsl;case c.scope.rzSliderMiddle.length:return c.maxH.rzsl;default:return c.middleHs[a].rzsl}}for(var c=this,d=this.middleBars,e=0;e<this.scope.rzSliderMiddle.length+1;e++){var f=d[e],g=!!f;f=g?f:a.element('<span class="rz-bar-wrapper rz-middle-bar-'+e+'" "index"="'+e+'"><span class="rz-bar rz-selection"></span></span>'),this.setWidth(f,Math.abs(b(e)-b(e-1))+this.handleHalfWidth),this.setLeft(f,this.multipleRange?b(e-1):0),g||(this.middleBar.append(f),f.on("mousedown",a.bind(this,this.onStart,null,null)),f.on("mousedown",a.bind(this,this.onMove,f)),f.on("touchstart",a.bind(this,this.onStart,null,null)),f.on("touchstart",a.bind(this,this.onMove,f))),this.middleBars[e]=f}for(var e=this.scope.rzSliderMiddle.length+1;e<this.middleBars.length;e++)this.middleBars[e].off(),this.middleBars[e].remove();this.scope.rzSliderMiddle.length+1<this.middleBars.length&&(this.middleBars=this.middleBars.slice(0,this.scope.rzSliderMiddle.length+1))},updateCmbLabel:function(){var a,b;this.minLab.rzsl+this.minLab.rzsw+10>=this.maxLab.rzsl?(a=this.getDisplayValue(this.scope.rzSliderModel),b=this.getDisplayValue(this.scope.rzSliderHigh),this.translateFn(a+" - "+b,this.cmbLab,!1),this.setLeft(this.cmbLab,this.selBar.rzsl+this.selBar.rzsw/2-this.cmbLab.rzsw/2),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.activeLabel&&""!==this.tracking?this.hideEl(this.cmbLab):this.showEl(this.cmbLab)):(this.activeLabel&&""!==this.tracking?(this.hideEl(this.maxLab),this.hideEl(this.minLab)):(this.showEl(this.maxLab),this.showEl(this.minLab)),this.hideEl(this.cmbLab))},updateActiveLabel:function(a,b){""===this.tracking?this.hideEl(this.activeLab):(this.translateFn(a,this.activeLab),this.setLeft(this.activeLab,b-this.activeLab.rzsw/2+this.handleHalfWidth),this.showEl(this.activeLab))},getDisplayValue:function(a){return this.customTrFn?this.customTrFn(a):a},roundStep:function(a){var b=this.step,c=+((a-this.minValue)%b).toFixed(3),d=c>b/2?a+b-c:a-c;return d=d.toFixed(this.precision),this.stepArray&&this.stepArray.length&&(d=f(this.stepArray,a)),+d},hideEl:function(a){return a.css({opacity:0})},showEl:function(a){return a.rzAlwaysHide?a:a.css({opacity:1})},setLeft:function(a,b){return a.rzsl=b,a.css({left:b+"px"}),b},getWidth:function(a){var b=a[0].getBoundingClientRect();return a.rzsw=b.right-b.left,a.rzsw},setWidth:function(a,b){return a.rzsw=b,a.css({width:b+"px"}),b},valueToOffset:function(a){return(a-this.minValue)*this.maxLeft/this.valueRange||0},valuesToOffset:function(a){var b=this;return _.map(a,function(a){return b.valueToOffset(a)})},offsetToValue:function(a){return a/this.maxLeft*this.valueRange+this.minValue},getEventX:function(a){return"clientX"in a?a.clientX:void 0===a.originalEvent?a.touches[0].clientX:a.originalEvent.touches[0].clientX},getNearestHandle:function(a){if(!this.range)return this.minH;var b=this.getEventX(a)-this.sliderElem.rzsl-this.handleHalfWidth;if(!this.multipleRange)return Math.abs(b-this.minH.rzsl)<Math.abs(b-this.maxH.rzsl)?this.minH:this.maxH;var c=_.minBy(this.middleHs,function(a){return Math.abs(b-a.rzsl)}),d=Math.abs(b-this.minH.rzsl),e=Math.abs(b-this.maxH.rzsl),f=void 0===c?Number.POSITIVE_INFINITY:Math.abs(b-c.rzsl);return e>d&&f>d?this.minH:d>f&&e>f?c:this.maxH},bindEvents:function(){if(!this.presentOnly&&!this.disabled){var b,c,d;this.dragRange?(b="rzSliderDrag",c=this.onDragStart,d=this.onDragMove):(b="rzSliderModel",c=this.onStart,d=this.onMove),this.minH.on("mousedown",a.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("mousedown",a.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.fullBar.on("mousedown",a.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",a.bind(this,this.onMove,this.fullBar)),this.selBar.on("mousedown",a.bind(this,c,null,b)),this.selBar.on("mousedown",a.bind(this,d,this.selBar)),this.ticks.on("mousedown",a.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",a.bind(this,this.onMove,this.ticks)),this.minH.on("touchstart",a.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("touchstart",a.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.fullBar.on("touchstart",a.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",a.bind(this,this.onMove,this.fullBar)),this.selBar.on("touchstart",a.bind(this,c,null,b)),this.selBar.on("touchstart",a.bind(this,d,this.selBar)),this.ticks.on("touchstart",a.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",a.bind(this,this.onMove,this.ticks))}},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off(),a.forEach(this.middleHs,function(a,b){a.off()},this),a.forEach(this.middleBars,function(a,b){a.off()},this)},onStart:function(b,d,e){var f,g,h=this.getEventNames(e);if(e.stopPropagation(),e.preventDefault(),""===this.tracking){if(this.calcViewDimensions(),b)this.tracking=d,"rzSliderMiddle"===d&&(this.middleTrackingIndex=b.index);else switch(b=this.getNearestHandle(e)){case this.minH:this.tracking="rzSliderModel";break;case this.maxH:this.tracking="rzSliderHigh";break;default:this.tracking="rzSliderMiddle",this.middleTrackingIndex=b.index}if(b.addClass("rz-active"),f=a.bind(this,this.dragging.active?this.onDragMove:this.onMove,b),g=a.bind(this,this.onEnd,f),c.on(h.moveEvent,f),c.one(h.endEvent,g),this.activeLabel){var i;switch(this.tracking){case"rzSliderModel":i=this.scope.rzSliderModel;break;case"rzSliderHigh":i=this.scope.rzSliderHigh;break;default:i=this.scope.rzSliderMiddle[this.middleTrackingIndex]}this.updateActiveLabel(i,b.rzsl),this.updateCmbLabel()}this.callOnStart()}},onMove:function(a,b){var c,d,e,f=this.getEventX(b);if(c=this.sliderElem.rzsl,d=f-c-this.handleHalfWidth,0>=d){if(0===a.rzsl)return;e=this.minValue,d=0}else if(d>=this.maxLeft){if(a.rzsl===this.maxLeft)return;e=this.maxValue,d=this.maxLeft}else e=this.offsetToValue(d),e=this.roundStep(e),d=this.valueToOffset(e);this.positionTrackingHandle(e,d)},onDragStart:function(a,b,c){var d=this.getEventX(c)-this.sliderElem.rzsl-this.handleHalfWidth;this.dragging={active:!0,value:this.offsetToValue(d),difference:this.scope.rzSliderHigh-this.scope.rzSliderModel,offset:d,lowDist:d-this.minH.rzsl,highDist:this.maxH.rzsl-d},this.minH.addClass("rz-active"),this.maxH.addClass("rz-active"),this.onStart(a,b,c)},onDragMove:function(a,b){var c,d,e,f,g=this.getEventX(b)-this.sliderElem.rzsl-this.handleHalfWidth;if(g<=this.dragging.lowDist){if(a.rzsl===this.dragging.lowDist)return;e=this.minValue,c=0,f=this.dragging.difference,d=this.valueToOffset(f)}else if(g>=this.maxLeft-this.dragging.highDist){if(a.rzsl===this.dragging.highDist)return;f=this.maxValue,d=this.maxLeft,e=this.maxValue-this.dragging.difference,c=this.valueToOffset(e)}else e=this.offsetToValue(g-this.dragging.lowDist),e=this.roundStep(e),c=this.valueToOffset(e),f=e+this.dragging.difference,d=this.valueToOffset(f);this.positionTrackingBar(e,f,c,d)},positionTrackingBar:function(a,b,c,d){this.scope.rzSliderModel=a,this.scope.rzSliderHigh=b,this.updateHandles("rzSliderModel",c),this.updateHandles("rzSliderHigh",d),this.scope.$apply(),this.callOnChange()},positionTrackingHandle:function(a,b){function c(a){switch(a){case-1:return i.minH;case i.scope.rzSliderMiddle.length:return i.maxH;default:return i.middleHs[a]}}function d(a){switch(a){case-1:return"rzSliderModel";case i.scope.rzSliderMiddle.length:return"rzSliderHigh";default:return"rzSliderMiddle"}}function e(a){switch(a){case-2:return Number.NEGATIVE_INFINITY;case-1:return i.scope.rzSliderModel;case i.scope.rzSliderMiddle.length:return i.scope.rzSliderHigh;case i.scope.rzSliderMiddle.length+1:return Number.POSITIVE_INFINITY;default:return i.scope.rzSliderMiddle[a]}}function f(a,b){switch(a){case-1:i.scope.rzSliderModel=b;break;case i.scope.rzSliderMiddle.length:i.rzSliderHigh=b;break;default:i.scope.rzSliderMiddle[a]=b}}function g(a,b){for(var c=-1;c<i.scope.rzSliderMiddle.length+2;c++)if(e(c-1)<=a&&a<=e(c))return b>=c?c:c-1}function h(a,b){for(var c=e(a),d=a>b?-1:1,g=0;g<Math.abs(a-b);g++){var h=a+g*d;f(h,e(h+d))}f(b,c)}var i=this;if(this.range&&!this.multipleRange&&("rzSliderModel"===this.tracking&&a>=this.scope.rzSliderHigh?(this.scope[this.tracking]=this.scope.rzSliderHigh,this.updateHandles(this.tracking,this.maxH.rzsl),this.tracking="rzSliderHigh",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.activeLabel&&this.updateActiveLabel(a,b),this.scope.$apply(),this.callOnChange()):"rzSliderHigh"===this.tracking&&a<=this.scope.rzSliderModel&&(this.scope[this.tracking]=this.scope.rzSliderModel,this.updateHandles(this.tracking,this.minH.rzsl),this.tracking="rzSliderModel",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.scope.$apply(),this.callOnChange())),this.range&&this.multipleRange){var j;switch(this.tracking){case"rzSliderModel":j=-1;break;case"rzSliderHigh":j=this.scope.rzSliderMiddle.length;break;case"rzSliderMiddle":j=this.middleTrackingIndex}if(a<e(j-1)||a>e(j+1)){var k=g(a,j);h(j,k),this.updateHandles("rzSliderHigh",this.maxH.rzsl),this.updateHandles("rzSliderModel",this.minH.rzsl),this.updateHandles("rzSliderMiddle",this.valuesToOffset(this.scope.rzSliderMiddle)),c(j).removeClass("rz-active"),c(k).addClass("rz-active"),this.activeLabel&&this.updateActiveLabel(a,b),this.tracking=d(k),this.middleTrackingIndex=k,this.scope.$apply(),this.callOnChange()}}"rzSliderMiddle"!==this.tracking&&this.scope[this.tracking]!==a&&(this.scope[this.tracking]=a,this.updateHandles(this.tracking,b),this.activeLabel&&this.updateActiveLabel(a,b),this.scope.$apply(),this.callOnChange()),"rzSliderMiddle"===this.tracking&&this.scope[this.tracking][this.middleTrackingIndex]!==a&&(this.middleHs[this.middleTrackingIndex].rzsl=b,this.scope.rzSliderMiddle[this.middleTrackingIndex]=a,this.updateHandles(this.tracking,this.valuesToOffset(this.scope.rzSliderMiddle)),this.activeLabel&&this.updateActiveLabel(a,b),this.scope.$apply(),this.callOnChange())},onEnd:function(b,d){var e=this.getEventNames(d).moveEvent;this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),a.forEach(this.middleHs,function(a,b){a.removeClass("rz-active")}),c.off(e,b),this.scope.$emit("slideEnded"),this.tracking="",this.activeLabel&&(this.updateActiveLabel(),this.updateCmbLabel()),this.dragging.active=!1,this.callOnEnd()},getEventNames:function(a){var b={moveEvent:"",endEvent:""};return a.touches||void 0!==a.originalEvent&&a.originalEvent.touches?(b.moveEvent="touchmove",b.endEvent="touchend"):(b.moveEvent="mousemove",b.endEvent="mouseup"),b}},g}]).directive("rzslider",["RzSlider",function(a){return{restrict:"E",scope:{rzSliderFloor:"=?",rzSliderCeil:"=?",rzSliderStep:"@",rzSliderStepArray:"=",rzSliderPrecision:"@",rzSliderModel:"=?",rzSliderMiddle:"=?",rzSliderHigh:"=?",rzSliderDraggable:"@",rzSliderTranslate:"&",rzSliderHideLimitLabels:"=?",rzSliderHidePointerLabels:"=?",rzSliderAlwaysShowBar:"=?",rzSliderPresentOnly:"@",rzSliderOnStart:"&",rzSliderOnChange:"&",rzSliderOnEnd:"&",rzSliderShowTicks:"=?",rzSliderShowTicksValue:"=?",rzSliderDisabled:"=?",rzSliderInterval:"=?",rzSliderLegend:"@?",rzSliderActiveLabel:"@?"},templateUrl:function(a,b){return b.rzSliderTplUrl||"rzSliderTpl.html"},link:function(b,c,d){return new a(b,c,d)}}}]);return b.run(["$templateCache",function(a){a.put("rzSliderTpl.html",'<span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection"></span></span> <span class=rz-pointer></span><ul class=rz-middles></ul><span class=rz-pointer></span> <span class="rz-bubble rz-limit"></span> <span class="rz-bubble rz-limit"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul class=rz-ticks></ul><span class=rz-legend></span><ul class=rz-middleBars></ul><span class=rz-bubble></span>')}]),b});